# 콘서트 예약 서비스 개발 단계별 프롬프트

이 문서는 콘서트 예약 서비스 구현을 위한 단계별 개발 가이드를 제공합니다. 각 단계는 명세서에 기반하여 설계되었으며, TDD(테스트 주도 개발), 헥사고날 아키텍처, SOLID 원칙을 적용하여 개발합니다.

## 📋 개발 단계 요약

1. **프로젝트 구조 및 기본 설정**
2. **도메인 모델 구현**
3. **핵심 비즈니스 로직 및 단위 테스트**
4. **인프라스트럭처 및 리포지토리 구현**
5. **API 구현 및 문서화**
6. **통합 테스트**

## 🚀 단계별 상세 설명

### STEP 1: 프로젝트 구조 및 기본 설정
```
콘서트 예약 서비스의 기본 프로젝트 구조를 설정합니다:
1. 헥사고날 아키텍처에 맞는 패키지 구조 설정
2. 필요한 의존성 추가 (Spring Boot, Spring Data JPA, H2 DB 등)
3. 기본적인 환경설정 구성
```

### STEP 2: 도메인 모델 구현
```
명세서에 있는 5가지 API에 필요한 핵심 도메인 모델을 구현합니다:
1. 유저와 대기열 관련 도메인 모델
2. 좌석과 예약 관련 도메인 모델
3. 결제 관련 도메인 모델
4. 각 도메인 간의 관계 설정
```

### STEP 3: 핵심 비즈니스 로직 및 단위 테스트
```
명세서의 핵심 비즈니스 로직을 TDD 방식으로 구현합니다:
1. 대기열 발급 및 관리 로직 구현 및 테스트
2. 예약 가능 날짜/좌석 조회 로직 구현 및 테스트
3. 좌석 예약 로직 구현 및 테스트 (임시 예약 포함)
4. 잔액 충전/조회 로직 구현 및 테스트
5. 결제 로직 구현 및 테스트
```

### STEP 4: 인프라스트럭처 및 리포지토리 구현
```
데이터 저장 및 관리를 위한 인프라스트럭처를 구현합니다:
1. 유저 및 대기열 관련 리포지토리
2. 좌석 및 예약 관련 리포지토리
3. 결제 관련 리포지토리
4. 동시성 제어를 위한 락 메커니즘 구현
```

### STEP 5: API 구현 및 문서화
```
명세서에 명시된 5가지 API를 구현하고 문서화합니다:
1. 유저 토큰 발급 API 구현
2. 예약 가능 날짜/좌석 API 구현
3. 좌석 예약 요청 API 구현
4. 잔액 충전/조회 API 구현
5. 결제 API 구현
6. Swagger/OpenAPI를 이용한 API 문서화
```

### STEP 6: 통합 테스트
```
구현된 서비스의 전체 흐름을 검증하는 통합 테스트를 작성합니다:
1. 대기열 → 좌석 예약 → 결제의 전체 흐름 테스트
2. 동시 요청 처리 테스트 (동시성 이슈 테스트)
3. 분산 환경 고려한 테스트 (여러 인스턴스 환경 시뮬레이션)
```

## 📌 주요 고려사항

### 명세서 핵심 포인트
- **유저간 대기열을 요청 순서대로 정확하게 제공할 방법을 고민해 봅니다.**
- **동시에 여러 사용자가 예약 요청을 했을 때, 좌석이 중복으로 배정 가능하지 않도록 합니다.**

### 개발 주안점
- 단위 테스트는 반드시 대상 객체/기능에 대한 의존성만 존재해야 함
- API의 완성이 목표가 아닌, 기본 및 주요 기능의 비즈니스 로직 및 유즈케이스가 구현 완료되어야 함 (Business Layer)
- DB Index, 대용량 처리를 위한 개선 포인트 등은 추후 챕터에서 진행하므로 최적화보다는 기능 개발의 완료를 목표로 함
- 특정 기능을 개발한 이유에 대한 합당한 설명과 함께 기능 개발을 진행

## 🛠 아키텍처 및 개발 원칙

- **헥사고날 아키텍처**: 도메인 로직과 인프라스트럭처의 명확한 분리
- **TDD (테스트 주도 개발)**: 테스트 먼저 작성, 구현, 리팩토링의 사이클
- **OOP (객체지향 프로그래밍)**: 객체 간의 책임과 역할 명확하게 정의
- **SOLID 원칙**: 단일 책임, 개방-폐쇄, 리스코프 치환, 인터페이스 분리, 의존성 역전 원칙 적용
- **최신 코드 스타일**: 현대적인 Java/Kotlin 코드 스타일과 패턴 적용
- **스프링 활용**: 스프링 프레임워크의 기능을 최대한 활용하여 개발 생산성 향상
