# 9. 프로젝트 개발 일정 계획


## 1. 개발 단계 요약

| 단계 | 설명 | 예상 기간 |
|-----|------|----------|
| **1. 환경 구성** | 프로젝트 환경 설정 및 기본 구조 정의 | 2일 |
| **2. 도메인 레이어 개발** | 핵심 도메인 모델 및 비즈니스 규칙 구현 | 1주 |
| **3. 애플리케이션 레이어 개발** | 유스케이스 및 포트 인터페이스 구현 | 1주 |
| **4. 어댑터 레이어 개발** | 입출력 어댑터 구현 및 인프라 연동 | 1주 |
| **5. 통합 및 테스트** | 전체 시스템 통합 및 테스트 진행 | 4일 |
| **6. 동시성 제어 구현 및 테스트** | 분산 락과 대기열 기능 구현 및 검증 | 3일 |

## 2. 상세 작업 일정

### 2.1. 환경 구성 (2일)

| 작업 ID | 작업 내용 | 담당자 | 예상 소요 시간 | 선행 작업 |
|--------|----------|--------|------------|----------|
| 1.1 | 프로젝트 초기화 및 기본 의존성 설정 | 개발자 | 2시간 | - |
| 1.2 | 헥사고날 아키텍처 기본 패키지 구조 생성 | 개발자 | 3시간 | 1.1 |
| 1.3 | H2 DB 환경 구성 (개발용) | 개발자 | 2시간 | 1.1 |
| 1.4 | Redis 로컬 환경 구성 | 개발자 | 3시간 | 1.1 |
| 1.5 | 기본 설정 파일 작성 (application.properties) | 개발자 | 2시간 | 1.3, 1.4 |

### 2.2. 도메인 레이어 개발 (1주)

| 작업 ID | 작업 내용 | 담당자 | 예상 소요 시간 | 선행 작업 |
|--------|----------|--------|------------|----------|
| 2.1 | User 엔티티 및 값 객체 구현 | 개발자 | 4시간 | 1.2 |
| 2.2 | Seat 및 Schedule 엔티티 구현 | 개발자 | 5시간 | 1.2 |
| 2.3 | Reservation 애그리게이트 구현 | 개발자 | 6시간 | 2.1, 2.2 |
| 2.4 | Payment 엔티티 및 관련 값 객체 구현 | 개발자 | 4시간 | 2.3 |
| 2.5 | ReservationService 도메인 서비스 구현 | 개발자 | 8시간 | 2.3 |
| 2.6 | PaymentService 도메인 서비스 구현 | 개발자 | 6시간 | 2.4 |
| 2.7 | 도메인 모델 단위 테스트 작성 | 개발자 | 8시간 | 2.1 ~ 2.6 |

### 2.3. 애플리케이션 레이어 개발 (1주)

| 작업 ID | 작업 내용 | 담당자 | 예상 소요 시간 | 선행 작업 |
|--------|----------|--------|------------|----------|
| 3.1 | 입력 포트 인터페이스 정의 (유스케이스) | 개발자 | 4시간 | 2.5, 2.6 |
| 3.2 | 출력 포트 인터페이스 정의 (레포지토리, 락, 큐) | 개발자 | 4시간 | 2.5, 2.6 |
| 3.3 | 토큰 발급 유스케이스 구현 | 개발자 | 6시간 | 3.1, 3.2 |
| 3.4 | 좌석 조회 유스케이스 구현 | 개발자 | 5시간 | 3.1, 3.2 |
| 3.5 | 좌석 예약 유스케이스 구현 | 개발자 | 8시간 | 3.3, 3.4 |
| 3.6 | 잔액 관리 유스케이스 구현 | 개발자 | 5시간 | 3.1, 3.2 |
| 3.7 | 결제 유스케이스 구현 | 개발자 | 6시간 | 3.5, 3.6 |
| 3.8 | 만료 처리 유스케이스 구현 | 개발자 | 4시간 | 3.5 |
| 3.9 | 유스케이스 단위 테스트 작성 | 개발자 | 8시간 | 3.3 ~ 3.8 |

### 2.4. 어댑터 레이어 개발 (1주)

| 작업 ID | 작업 내용 | 담당자 | 예상 소요 시간 | 선행 작업 |
|--------|----------|--------|------------|----------|
| 4.1 | JPA 엔티티 및 레포지토리 구현 | 개발자 | 8시간 | 3.2 |
| 4.2 | Redis 기반 분산 락 어댑터 구현 | 개발자 | 8시간 | 3.2 |
| 4.3 | Redis 기반 대기열 어댑터 구현 | 개발자 | 8시간 | 3.2 |
| 4.4 | 토큰 발급 컨트롤러 구현 | 개발자 | 4시간 | 3.3, 4.3 |
| 4.5 | 좌석 조회 컨트롤러 구현 | 개발자 | 4시간 | 3.4, 4.1 |
| 4.6 | 좌석 예약 컨트롤러 구현 | 개발자 | 5시간 | 3.5, 4.1, 4.2 |
| 4.7 | 잔액 관리 컨트롤러 구현 | 개발자 | 4시간 | 3.6, 4.1 |
| 4.8 | 결제 컨트롤러 구현 | 개발자 | 5시간 | 3.7, 4.1 |
| 4.9 | 스케줄러 구현 (@Scheduled) | 개발자 | 4시간 | 3.8, 4.2, 4.3 |
| 4.10 | 어댑터 단위 테스트 작성 | 개발자 | 8시간 | 4.1 ~ 4.9 |

### 2.5. 통합 및 테스트 (4일)

| 작업 ID | 작업 내용 | 담당자 | 예상 소요 시간 | 선행 작업 |
|--------|----------|--------|------------|----------|
| 5.1 | 컴포넌트 통합 및 의존성 주입 설정 | 개발자 | 6시간 | 4.10 |
| 5.2 | 토큰 발급 및 인증 통합 테스트 | 개발자 | 4시간 | 5.1 |
| 5.3 | 좌석 예약 시나리오 통합 테스트 | 개발자 | 5시간 | 5.1 |
| 5.4 | 결제 시나리오 통합 테스트 | 개발자 | 5시간 | 5.1 |
| 5.5 | 만료 처리 스케줄러 통합 테스트 | 개발자 | 4시간 | 5.3, 5.4 |
| 5.6 | 전체 시스템 API 테스트 | 개발자 | 8시간 | 5.2 ~ 5.5 |

### 2.6. 동시성 제어 구현 및 테스트 (3일)

| 작업 ID | 작업 내용 | 담당자 | 예상 소요 시간 | 선행 작업 |
|--------|----------|--------|------------|----------|
| 6.1 | Redis 분산 락 테스트 코드 작성 | 개발자 | 6시간 | 5.6 |
| 6.2 | 동시 좌석 예약 시나리오 테스트 | 개발자 | 8시간 | 6.1 |
| 6.3 | 대기열 시스템 동시 처리 테스트 | 개발자 | 6시간 | 5.6 |
| 6.4 | 동시성 이슈 개선 및 검증 | 개발자 | 8시간 | 6.2, 6.3 |

## 3. 핵심 기능 구현 우선순위

구현 중심 프로젝트로 진행되므로, 아래 순서로 핵심 기능을 우선 구현합니다:

1. **도메인 모델 및 비즈니스 규칙**: 헥사고날 아키텍처의 핵심인 내부 영역 우선 구현
2. **대기열 시스템**: Redis 기반 대기열 관리 및 토큰 발급 기능
3. **좌석 예약 및 임시 배정**: 분산 락을 활용한 동시성 제어 핵심 기능
4. **결제 처리**: 사용자 잔액 관리 및 결제 처리
5. **만료 처리 스케줄러**: 임시 배정된 좌석의 자동 만료 처리

## 4. 주요 기술적 과제 및 학습 포인트

부트캠프/사이드 프로젝트 성격에 맞는 핵심 학습 포인트:

| 기술적 과제 | 학습 포인트 | 참고 자료 |
|-----------|------------|----------|
| **헥사고날 아키텍처 적용** | 포트와 어댑터 패턴의 실제 구현 방법 | "Clean Architecture"(Robert C. Martin), "Get Your Hands Dirty on Clean Architecture"(Tom Hombergs) |
| **분산 락 구현** | Redis를 활용한 동시성 제어 메커니즘 | Redisson 라이브러리 문서, "Redis in Action" |
| **대기열 시스템 구현** | Redis Sorted Set을 활용한 대기열 관리 | Redis 공식 문서 |
| **트랜잭션 관리** | 애플리케이션 레벨에서의 트랜잭션 처리 | Spring Transaction 관련 문서 |
| **테스트 코드 작성** | 도메인 주도 설계에서의 효과적인 테스트 전략 | "Testing Java Microservices"(Alex Soto Bueno) |

## 5. 개발 환경 설정 가이드

구현에 바로 착수할 수 있도록 개발 환경 설정 절차:

1. **Kotlin & Spring Boot 설정**
   ```bash
   # 프로젝트 생성 (Spring Initializr 사용)
   curl https://start.spring.io/starter.zip \
      -d type=gradle-project \
      -d language=kotlin \
      -d bootVersion=3.1.0 \
      -d groupId=com.example \
      -d artifactId=concert-booking \
      -d name=concert-booking \
      -d packageName=com.example.concertbooking \
      -d dependencies=web,data-jpa,data-redis,validation \
      -o concert-booking.zip
   ```

2. **헥사고날 아키텍처 패키지 구조**
   ```
   src/main/kotlin/com/example/concertbooking/
   ├── domain/              # 도메인 모델 및 서비스
   ├── application/         # 유스케이스 및 포트
   │   ├── port/
   │   │   ├── in/          # 입력 포트
   │   │   └── out/         # 출력 포트
   │   └── service/         # 유스케이스 구현
   └── adapter/             # 어댑터
       ├── in/
       │   └── web/         # REST 컨트롤러
       └── out/
           ├── persistence/ # JPA 구현체
           └── redis/       # Redis 구현체
   ```

3. **Redis 로컬 설정**
   ```bash
   # Docker로 Redis 실행
   docker run --name concert-redis -p 6379:6379 -d redis
   ```

4. **H2 데이터베이스 설정** (application.properties)
   ```properties
   # H2 설정
   spring.datasource.url=jdbc:h2:mem:concertdb
   spring.datasource.driverClassName=org.h2.Driver
   spring.datasource.username=sa
   spring.datasource.password=
   spring.h2.console.enabled=true
   
   # JPA 설정
   spring.jpa.hibernate.ddl-auto=create-drop
   spring.jpa.show-sql=true
   
   # Redis 설정
   spring.redis.host=localhost
   spring.redis.port=6379
   ```
