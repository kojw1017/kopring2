# 2. 요구사항

## 1. 기능적 요구사항

### 1.1. 대기열 시스템
-   [API-1] 사용자는 서비스 접근 시 고유한 대기열 토큰을 발급받는다.
-   토큰에는 유저 UUID, 대기 순번 또는 예상 대기 시간 정보가 포함된다.
-   활성 상태(작업 가능)의 토큰을 가진 사용자만 핵심 API(예약, 결제 등)를 호출할 수 있다.
-   대기열은 요청 순서대로 처리되어야 한다.

### 1.2. 좌석 조회
-   [API-2] 예약 가능한 전체 콘서트 날짜 목록을 조회할 수 있다.
-   [API-2] 특정 날짜를 선택하여 예약 가능한 좌석 목록(1~50번)과 상태(예약 가능/임시 배정/판매 완료)를 조회할 수 있다.

### 1.3. 좌석 예약
-   [API-3] 사용자는 날짜와 좌석 번호를 지정하여 예약을 요청한다.
-   예약 요청 성공 시, 해당 좌석은 5분간 '임시 배정' 상태가 된다.
-   '임시 배정'된 좌석은 다른 사용자가 예약할 수 없다.
-   5분 내에 결제가 완료되지 않으면, 좌석의 '임시 배정' 상태는 자동으로 해제되고 다시 '예약 가능' 상태가 된다.

### 1.4. 잔액 관리
-   [API-4] 사용자는 자신의 잔액을 충전할 수 있다.
-   [API-4] 사용자는 자신의 현재 잔액을 조회할 수 있다.

### 1.5. 결제
-   [API-5] 사용자는 임시 배정된 좌석에 대해 결제를 진행한다.
-   결제 시, 사용자 잔액이 차감된다.
-   결제 성공 시, 좌석은 '판매 완료' 상태로 변경되고, 소유권이 사용자에게 영구 할당된다.
-   결제가 완료되면, 사용자의 대기열 토큰은 만료(또는 비활성) 처리된다.

## 2. 비기능적 요구사항

-   **가용성:** 애플리케이션은 다수의 인스턴스로 배포되어도 정상 동작해야 한다 (Scale-out).
-   **일관성:** 여러 서버에서 동시에 동일한 자원(좌석)에 대한 요청이 발생하더라도 데이터 정합성이 깨지면 안 된다 (동시성 제어).
-   **테스트:** 모든 핵심 기능 및 제약사항에 대해 최소 1개 이상의 단위 테스트 코드가 존재해야 한다.
